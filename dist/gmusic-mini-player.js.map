{"version":3,"sources":["gmusic-mini-player.js"],"names":[],"mappings":"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","file":"gmusic-mini-player.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = {\r\n  CLASS_NAMESPACE: 'gmusic-mini-player',\r\n};\r\n\n},{}],2:[function(require,module,exports){\n\r\n\r\n// DEV: These constants will be transformed into string constants by browserify\r\nconst BASE_CSS = \".gmusic-mini-player #material-player-left-wrapper .now-playing-actions,.gmusic-mini-player body[controls] #mini-info,.gmusic-mini-player body[ready]:hover #mini-info{opacity:1!important}#embed-container,.gmusic-mini-player #mainContainer,.gmusic-mini-player #mini-info{overflow:hidden!important}.gmusic-mini-player,.gmusic-mini-player body{height:300px!important;width:300px!important}.gmusic-mini-player #player{min-width:280px!important;z-index:9999999!important;height:65px!important;min-height:65px!important;transition:bottom .3s!important;bottom:-100px!important;transition-timing-function:ease-in-out!important;width:280px!important;left:10px!important;right:10px!important;border-bottom-left-radius:8px!important;border-bottom-right-radius:8px!important}.gmusic-mini-player body[controls] #player,.gmusic-mini-player body[ready]:hover #player{bottom:-12px!important}.gmusic-mini-player #topBar{display:none!important}.gmusic-mini-player #material-player-left-wrapper .now-playing-info-content,.gmusic-mini-player #material-player-left-wrapper .player-left .image-wrapper,.gmusic-mini-player #material-player-left-wrapper [data-id=now-playing-menu],.gmusic-mini-player #material-player-right-wrapper{display:none!important}.gmusic-mini-player #material-player-left-wrapper{flex:none!important;width:0!important}.gmusic-mini-player #player #material-player-left-wrapper .rating-container paper-icon-button{background:0 0!important;position:absolute!important;top:8px!important}.gmusic-mini-player #player #material-player-left-wrapper .rating-container paper-icon-button:nth-child(1){left:20px!important;display:none!important}.gmusic-mini-player #player #material-player-left-wrapper .rating-container paper-icon-button:nth-child(2){left:210px!important;display:none!important}.gmusic-mini-player #player[radio] #material-player-left-wrapper .rating-container paper-icon-button:nth-child(1),.gmusic-mini-player #player[radio] #material-player-left-wrapper .rating-container paper-icon-button:nth-child(2){display:block!important}.gmusic-mini-player #material-player-left-wrapper .rating-container{width:0!important}.gmusic-mini-player #mini-album{position:fixed!important;top:0!important;left:0!important;display:block!important;width:100%!important;height:100%!important;z-index:9999998!important}.gmusic-mini-player .player-progress-wrapper{left:0!important}.gmusic-mini-player .material-player-middle{margin:0 auto!important}.gmusic-mini-player #player.material .material-player-middle paper-icon-button[data-id=play-pause] iron-icon,.gmusic-mini-player #player.material .material-player-middle sj-icon-button[data-id=play-pause] core-icon{height:50px!important;width:50px!important;top:-2px!important}.gmusic-mini-player paper-icon-button[data-id=play-pause]{text-align:center!important}.gmusic-mini-player [data-id=play-pause]::shadow paper-ripple.circle{height:50px!important;width:50px!important;margin-left:6px!important;margin-top:-2px!important}.gmusic-mini-player [data-id=forward],.gmusic-mini-player [data-id=repeat],.gmusic-mini-player [data-id=rewind],.gmusic-mini-player [data-id=shuffle]{top:-8px!important}.gmusic-mini-player .mini-timespan-c,.gmusic-mini-player .mini-timespan-t{position:absolute!important;top:8px!important;font-size:11px!important;display:block!important}.gmusic-mini-player [data-id=repeat]{left:28px!important}.gmusic-mini-player [data-id=rewind]{left:16px!important}.gmusic-mini-player [data-id=forward]{left:-16px!important}.gmusic-mini-player [data-id=shuffle]{left:-28px!important}.gmusic-mini-player .mini-timespan-c{left:6px!important}.gmusic-mini-player .mini-timespan-t{right:6px!important}.gmusic-mini-player ::shadow #mainContainer{overflow:hidden!important}.gmusic-mini-player #mini-info{position:fixed!important;top:0!important;left:0!important;width:100%!important;height:90px!important;background:-webkit-linear-gradient(top,rgba(45,45,45,.85) 0,rgba(9,9,9,.41) 79%,rgba(0,0,0,0) 100%)!important;display:block!important;z-index:9999999!important;transition:opacity .3s!important;transition-timing-function:ease-in-out!important;opacity:0!important}.gmusic-mini-player #mini-info span{color:#EEE!important;display:block!important;font-size:20px!important;padding:4px 12px!important;cursor:default!important}.gmusic-mini-player #mini-info span:last-child{font-size:16px!important;height:18px!important;overflow:hidden!important}[data-id=show-miniplayer-dp]{color:#9e9e9e!important;position:absolute!important;top:auto!important;bottom:-4px!important;right:-4px!important;margin:0!important}#player paper-icon-button[data-id=show-miniplayer-dp] iron-icon{width:16px!important;height:16px!important}#embed-container{width:0!important}\"; // eslint-disable-line\r\nconst CONSTANTS = require('../lib/_constants');\r\n\r\nconst GMusicMiniPlayerController = class GMusicMiniPlayerController {\r\n  _initCSS() {\r\n    const styleElement = document.createElement('style');\r\n    styleElement.innerHTML = BASE_CSS;\r\n    document.body.appendChild(styleElement);\r\n  }\r\n\r\n  _initMiniPlayerUI() {\r\n    this.miniNowPlayerInfo = document.createElement('div');\r\n    this.miniAlbumArt = document.createElement('img');\r\n\r\n    // DEV: Configure mini player elements\r\n    this.miniNowPlayerInfo.id = 'mini-info';\r\n    this.miniNowPlayerInfo.setAttribute('style', 'display: none');\r\n    this.miniNowPlayerInfo.innerHTML = '<span></span><span></span>';\r\n\r\n    this.miniAlbumArt.id = 'mini-album';\r\n    // DEV: Placeholder image\r\n    this.miniAlbumArt.src = 'https://www.samuelattard.com/img/gpm_placeholder.jpg';\r\n    this.miniAlbumArt.setAttribute('style', 'display: none');\r\n    // DEV: If the album art load ever fails, use the placeholder\r\n    this.miniAlbumArt.addEventListener('error', (e) => {\r\n      e.target.src = 'https://www.samuelattard.com/img/gpm_placeholder.jpg'; // eslint-disable-line\r\n    });\r\n    // DEV: Prevent dragging of the album image\r\n    this.miniAlbumArt.addEventListener('mousedown', (e) => {\r\n      e.preventDefault();\r\n    });\r\n\r\n    document.body.appendChild(this.miniNowPlayerInfo);\r\n    document.body.appendChild(this.miniAlbumArt);\r\n  }\r\n\r\n  _initMiniPlayerTimingUI() {\r\n    const player = document.getElementById('player');\r\n    const container = document.createElement('div');\r\n    this.timeSpan_SoFar = document.createElement('span');\r\n    this.timeSpan_Total = document.createElement('span');\r\n\r\n    this.timeSpan_SoFar.classList.add('mini-timespan-c');\r\n    this.timeSpan_SoFar.setAttribute('style', 'display: none');\r\n    this.timeSpan_SoFar.innerHTML = '0:00';\r\n    player.appendChild(this.timeSpan_SoFar);\r\n\r\n    this.timeSpan_Total.classList.add('mini-timespan-t');\r\n    this.timeSpan_Total.setAttribute('style', 'display: none');\r\n    this.timeSpan_Total.innerHTML = '0:00';\r\n    player.appendChild(this.timeSpan_Total);\r\n\r\n    container.innerHTML = `\r\n      <paper-icon-button\r\n        data-id=\"show-miniplayer-dp\"\r\n        icon=\"open-in-new\"\r\n        title=\"Show mini player\"\r\n        aria-label=\"Show mini player\"\r\n        role=\"button\"\r\n        tabindex=\"0\"\r\n        no-focus=\"\">\r\n      </paper-icon-button>`;\r\n    this.miniButtonElement = container.querySelectorAll('[data-id=\"show-miniplayer-dp\"]')[0];\r\n    this.miniButtonElement.addEventListener('click', (e) => {\r\n      this.getControls().toggle();\r\n      e.target.blur();\r\n      this.miniButtonElement.style.display = 'none';\r\n      document.body.removeAttribute('ready');\r\n      setTimeout(() => {\r\n        this.miniButtonElement.style.display = 'block';\r\n      }, 400);\r\n      e.preventDefault();\r\n      return false;\r\n    });\r\n    document.getElementById('player').appendChild(container);\r\n  }\r\n\r\n  _initMiniPlayerTimingMonitor() {\r\n    this.GPM_API.on('change:playback-time', (e) => {\r\n      this.timeSpan_SoFar.innerHTML = (e.current ? this._timeFormat(e.current) : '0:00');\r\n      this.timeSpan_Total.innerHTML = (e.total ? this._timeFormat(e.total) : '0:00');\r\n    });\r\n  }\r\n\r\n  _initMiniPlayerRadioMonitor() {\r\n    this.GPM_API.on('change:playback', () => {\r\n      const repeatElement = document.querySelectorAll(this.SELECTORS.repeat.buttonSelector);\r\n      const player = document.querySelector('#player');\r\n      if (repeatElement && repeatElement[0] && player) {\r\n        if (repeatElement[0].style.display === 'none') {\r\n          if (player.getAttribute('radio') === null) {\r\n            player.setAttribute('radio', 'on');\r\n          }\r\n        } else if (player.getAttribute('radio') !== null) {\r\n          player.removeAttribute('radio');\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  _initMiniPlayerNowPlayingMonitor() {\r\n    this.GPM_API.on('change:song', (e) => {\r\n      this.miniAlbumArt.src = e.art.replace('=s90', '=s300');\r\n      const infoSpans = this.miniNowPlayerInfo.getElementsByTagName('span');\r\n      infoSpans[0].innerHTML = e.title;\r\n      infoSpans[1].innerHTML = `${e.artist} - ${e.album}`;\r\n    });\r\n  }\r\n\r\n  _initGlobalEventHandlers() {\r\n    // DEV: Scroll to change volume in mini player mode\r\n    window.addEventListener('mousewheel', (e) => {\r\n      if (!this.scrollVolume) return;\r\n      if (this.miniState) {\r\n        if (e.wheelDelta < 0) {\r\n          this.GPM_API.volume.decreaseVolume();\r\n        } else {\r\n          this.GPM_API.volume.increaseVolume();\r\n        }\r\n      }\r\n    });\r\n\r\n    // DEV: Handle abstract resizing of the window\r\n    document.body.addEventListener('mousemove', () => {\r\n      if (this.miniState && this.miniButtonElement.style.display !== 'none') {\r\n        document.body.setAttribute('ready', 'ready');\r\n      }\r\n    });\r\n\r\n    // DEV: When in mini player mode implementees might want to drag the window\r\n    document.addEventListener('mousedown', (e) => {\r\n      if (this.miniState && e.clientY <= 210) {\r\n        this._fire('dragstart');\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n\r\n  constructor() {\r\n    this.GPM_API = new window.GMusic(window);\r\n    this.SELECTORS = window.GMusic.SELECTORS;\r\n\r\n    this._initCSS();\r\n    this._initMiniPlayerUI();\r\n    this._initMiniPlayerNowPlayingMonitor();\r\n    this._initMiniPlayerTimingUI();\r\n    this._initMiniPlayerTimingMonitor();\r\n    this._initMiniPlayerRadioMonitor();\r\n\r\n    this.miniState = false;\r\n    this.scrollVolume = true;\r\n    this.events = {};\r\n\r\n    this._initGlobalEventHandlers();\r\n  }\r\n\r\n  _timeFormat(milli) {\r\n    const totalSeconds = Math.floor(milli / 1000);\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    return `${minutes}:${(seconds < 10 ? `0${seconds}` : seconds)}`;\r\n  }\r\n\r\n  _hook(what, fn) {\r\n    this.events[what] = this.events[what] || [];\r\n    this.events[what].push(fn);\r\n  }\r\n\r\n  _fire(what, e) {\r\n    this.events[what] = this.events[what] || [];\r\n    this.events[what].forEach((fn) => {\r\n      fn(e);\r\n    });\r\n  }\r\n\r\n  getControls() {\r\n    return {\r\n      enable: () => {\r\n        this._enable();\r\n      },\r\n      disable: () => {\r\n        this._disable();\r\n      },\r\n      toggle: () => {\r\n        if (this.miniState) {\r\n          this._disable();\r\n        } else {\r\n          this._enable();\r\n        }\r\n      },\r\n      enableButton: () => {\r\n        this._enableButton();\r\n      },\r\n      disableButton: () => {\r\n        this._disableButton();\r\n      },\r\n      showControlsWhen: (when) => {\r\n        this._showControlsWhen(when);\r\n      },\r\n      setScrollVolume: (state) => {\r\n        this.scrollVolume = state;\r\n      },\r\n      getScrollVolume: () => {\r\n        return this.scrollVolume;\r\n      },\r\n      on: (what, fn) => {\r\n        this._hook(what, fn);\r\n      },\r\n    };\r\n  }\r\n\r\n  _enable() {\r\n    let delay = 0;\r\n    this.miniState = true;\r\n    // close menu\r\n    const closeBtn = document.getElementById('left-nav-close-button');\r\n    if (closeBtn !== null) {\r\n      closeBtn.click();\r\n    }\r\n    // DEV: Allow a syncronous callback to handle the enable event and delay by X milliseconds\r\n    this._fire('enable', (newDelay) => {\r\n      delay = newDelay;\r\n    });\r\n    setTimeout(() => {\r\n      document.querySelector('html').classList.add(CONSTANTS.CLASS_NAMESPACE);\r\n    }, delay);\r\n  }\r\n\r\n  _disable() {\r\n    let delay = 0;\r\n    this.miniState = false;\r\n    // DEV: Allow a syncronous callback to handle the disable event and delay by X milliseconds\r\n    this._fire('disable', (newDelay) => {\r\n      delay = newDelay;\r\n    });\r\n    setTimeout(() => {\r\n      document.querySelector('html').classList.remove(CONSTANTS.CLASS_NAMESPACE);\r\n    }, delay);\r\n  }\r\n\r\n  _enableButton() {\r\n    this.miniButtonElement.style.display = 'block';\r\n  }\r\n\r\n  _disableButton() {\r\n    this.miniButtonElement.style.display = 'none';\r\n  }\r\n\r\n  _showControlsWhen(when) {\r\n    if (when === 'hover') {\r\n      document.body.removeAttribute('controls');\r\n    } else {\r\n      document.body.setAttribute('controls', 'controls');\r\n    }\r\n  }\r\n};\r\n\r\nif (!window.GMusic) {\r\n  console.error('The core GMusic library must be included for the GMusic mini player library to work'); // eslint-disable-line\r\n} else {\r\n  const controller = new GMusicMiniPlayerController();\r\n  // DEV: Hook into the existing GMusic libraries global prototype\r\n  window.GMusic._protoObj.mini = controller.getControls();\r\n}\r\n\r\n\n},{\"../lib/_constants\":1}]},{},[2]);\n"]}